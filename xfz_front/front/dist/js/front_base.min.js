function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smscaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuehBoxHover()},FrontBase.prototype.listenAuehBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenswitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptcha(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),s=$(".close-btn"),a=$(".form-control");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),s.click(function(){t.hideEvent(),a.reset()})},Auth.prototype.listenswitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:0}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptcha=function(){var n=this,e=$(".signup-group input[name='telephone']");n.smscaptcha.click(function(){var t=e.val();t||messageBox.showError("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smscaptcha.addClass("disabled");var n=20;t.smscaptcha.unbind("click");var e=setInterval(function(){t.smscaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smscaptcha.removeClass("disabled"),t.smscaptcha.text("发送验证码"),t.listenSmsCaptcha())},1e3)},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),o=t.find("input[name='password']"),i=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=o.val(),e=i.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){if(200==t.code)a.hideEvent(),window.location.reload();else{var n=t.message;if("string"==typeof n||n.constructor==String)window.messageBox.show(n);else for(var e in n){var s=n[e][0];window.messageBox.show(s)}}},fail:function(t){console.log(t)}})})},Auth.prototype.listenSignupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),s=f.find("input[name='img_captcha']"),a=f.find("input[name='password1']"),o=f.find("input[name='password2']"),i=f.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=s.val(),u=a.val(),l=o.val(),h=i.val();xfzajax.post({url:"/account/register/",data:{telephone:c,username:r,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc2NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdWVoQm94SG92ZXIiLCJhdXRoYm94IiwidXNlcm1vcmVib3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwibGlzdGVuU2hvd0hpZGVFdmVudCIsImxpc3RlbnN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TbXNDYXB0Y2hhIiwibGlzdGVuU2lnbnVwRXZlbnQiLCJzaG93RXZlbnQiLCJoaWRlRXZlbnQiLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsInV3c2VyViIsImNsaWNrIiwiY3NzIiwibGVmdCIsInJlc2V0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJpbWdjYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJ0ZWxlcGhvbmVJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsIm1lc3NhZ2VCb3giLCJzaG93RXJyb3IiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJzbXNTdWNjZXNzRXZlbnQiLCJmYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2hvd1N1Y2Nlc3MiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJzaWduaW5Hcm91cCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibWVzc2FnZU9iamVjdCIsImNvbnN0cnVjdG9yIiwiU3RyaW5nIiwia2V5IiwibWVzc2FnZSIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxhQWtCVCxTQUFTQyxPQUNMLElBQUlDLEVBQU9DLEtBQ1hELEVBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxFQUFLSSxjQUFjRCxFQUFFLG1CQUNyQkgsRUFBS0ssV0FBWUYsRUFBRSxvQkFsQnZCTCxVQUFVUSxVQUFVQyxJQUFLLFdBQ1hOLEtBQ0xPLHNCQUVUVixVQUFVUSxVQUFVRSxtQkFBbUIsV0FDbkMsSUFBSUMsRUFBVU4sRUFBRSxhQUNaTyxFQUFhUCxFQUFFLGtCQUNuQk0sRUFBUUUsTUFBTSxXQUNWRCxFQUFZRSxRQUNkLFdBQ0FGLEVBQVlHLFVBVWxCZCxLQUFLTyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlQLEVBQU1DLEtBQ1ZELEVBQUtjLHNCQUNMZCxFQUFLZSxvQkFDTGYsRUFBS2dCLG9CQUNMaEIsRUFBS2lCLHdCQUNMakIsRUFBS2tCLG1CQUNMbEIsRUFBS21CLHFCQUdUcEIsS0FBS08sVUFBVWMsVUFBWSxXQUNabkIsS0FDTkMsWUFBWVUsUUFHckJiLEtBQUtPLFVBQVVlLFVBQVksV0FDWnBCLEtBQ05DLFlBQVlXLFFBR3JCZCxLQUFLTyxVQUFVUSxvQkFBc0IsV0FDakMsSUFBSWQsRUFBTUMsS0FDTnFCLEVBQVduQixFQUFFLGVBQ2JvQixFQUFXcEIsRUFBRSxlQUNicUIsRUFBVXJCLEVBQUUsY0FDWnNCLEVBQU90QixFQUFFLGlCQUVibUIsRUFBVUksTUFBTSxXQUNaMUIsRUFBS29CLFlBQ0xwQixFQUFLSSxjQUFjdUIsSUFBSSxDQUFDQyxLQUFPLE1BRW5DTCxFQUFVRyxNQUFNLFdBQ1oxQixFQUFLb0IsWUFDTHBCLEVBQUtJLGNBQWN1QixJQUFJLENBQUNDLE1BQVEsUUFFcENKLEVBQVNFLE1BQU0sV0FDWjFCLEVBQUtxQixZQUNMSSxFQUFPSSxXQU1kOUIsS0FBS08sVUFBVVMsa0JBQW9CLFdBQy9CLElBQUlmLEVBQUtDLEtBQ0lFLEVBQUUsV0FDTnVCLE1BQU0sV0FDWCxJQUFJSSxFQUFjOUIsRUFBS0ksY0FBY3VCLElBQUksU0FDekNHLEVBQVlDLFNBQVNELElBQ0wsRUFDZDlCLEVBQUtJLGNBQWM0QixRQUFRLENBQUNKLEtBQU8sSUFFakM1QixFQUFLSSxjQUFjNEIsUUFBUSxDQUFDSixLQUFPLGNBSy9DN0IsS0FBS08sVUFBVVcsc0JBQXNCLFdBQ2pDLElBQUlnQixFQUFZOUIsRUFBRSxnQkFDbEI4QixFQUFXUCxNQUFNLFdBQ2JPLEVBQVdDLEtBQUssTUFBTSxnQ0FBbUNDLEtBQUtDLGFBTXRFckMsS0FBS08sVUFBVVksaUJBQWlCLFdBQzVCLElBQUlsQixFQUFNQyxLQUNOb0MsRUFBZWxDLEVBQUUseUNBQ3JCSCxFQUFLSyxXQUFXcUIsTUFBTSxXQUNuQixJQUFJWSxFQUFVRCxFQUFlRSxNQUN4QkQsR0FDQUUsV0FBV0MsVUFBVSxZQUV6QkMsUUFBUUMsSUFBSSxDQUNSQyxJQUFNLHdCQUNOQyxLQUFPLENBQ0hQLFVBQVlBLEdBRWhCUSxRQUFVLFNBQVVDLEdBQ0csS0FBaEJBLEVBQWEsTUFDWi9DLEVBQUtnRCxtQkFHYkMsS0FBTyxTQUFVQyxHQUNiQyxRQUFRQyxJQUFJRixTQU01Qm5ELEtBQUtPLFVBQVUwQyxnQkFBZ0IsV0FDM0IsSUFBSWhELEVBQUtDLEtBQ1R1QyxXQUFXYSxZQUFZLGNBQ3ZCckQsRUFBS0ssV0FBV2lELFNBQVMsWUFDekIsSUFBSUMsRUFBTyxHQUNYdkQsRUFBS0ssV0FBV21ELE9BQU8sU0FDdkIsSUFBSUMsRUFBTUMsWUFBWSxXQUNsQjFELEVBQUtLLFdBQVdzRCxLQUFLSixFQUFNLE1BQzNCQSxHQUFPLElBQ0csSUFDTkssY0FBY0gsR0FDZHpELEVBQUtLLFdBQVd3RCxZQUFZLFlBQzVCN0QsRUFBS0ssV0FBV3NELEtBQUssU0FDckIzRCxFQUFLa0IscUJBR1AsTUFJVm5CLEtBQUtPLFVBQVVVLGtCQUFtQixXQUM5QixJQUFJaEIsRUFBT0MsS0FFUDZELEVBQWMzRCxFQUFFLGlCQUNoQmtDLEVBQWlCeUIsRUFBWUMsS0FBSywyQkFDbENDLEVBQWVGLEVBQVlDLEtBQUssMEJBQ2hDRSxFQUFnQkgsRUFBWUMsS0FBSywwQkFDdkJELEVBQVlDLEtBQUssZUFFckJyQyxNQUFNLFdBQ1osSUFBSVksRUFBVUQsRUFBZUUsTUFDekIyQixFQUFXRixFQUFjekIsTUFDekI0QixFQUFVRixFQUFjRyxLQUFLLFdBRWpDMUIsUUFBUTJCLEtBQUssQ0FDVHpCLElBQU0sa0JBQ05DLEtBQU8sQ0FDSFAsVUFBWUEsRUFDWjRCLFNBQVdBLEVBQ1hDLFNBQVdBLEVBQVMsRUFBRSxHQUUxQnJCLFFBQVUsU0FBVUMsR0FDaEIsR0FBcUIsS0FBbEJBLEVBQWEsS0FDWi9DLEVBQUtxQixZQUNMaUQsT0FBT0MsU0FBU0MsYUFDZCxDQUNGLElBQUlDLEVBQWMxQixFQUFnQixRQUNsQyxHQUEyQixpQkFBakIwQixHQUE2QkEsRUFBY0MsYUFBZUMsT0FDaEVMLE9BQU85QixXQUFXNUIsS0FBSzZELFFBRXZCLElBQUksSUFBSUcsS0FBT0gsRUFBYyxDQUN6QixJQUNJSSxFQURTSixFQUFjRyxHQUNMLEdBQ3RCTixPQUFPOUIsV0FBVzVCLEtBQUtpRSxNQU12QzVCLEtBQU8sU0FBVUMsR0FDYkMsUUFBUUMsSUFBSUYsU0FRNUJuRCxLQUFLTyxVQUFVYSxrQkFBb0IsV0FDL0IsSUFBSTJELEVBQWMzRSxFQUFFLGlCQUNKMkUsRUFBWWYsS0FBSyxlQUN2QnJDLE1BQU0sU0FBVXFELEdBQ3RCQSxFQUFNQyxpQkFDTixJQUFJM0MsRUFBaUJ5QyxFQUFZZixLQUFLLDJCQUNsQ2tCLEVBQWdCSCxFQUFZZixLQUFLLDBCQUNqQ21CLEVBQWtCSixFQUFZZixLQUFLLDZCQUNuQ29CLEVBQWlCTCxFQUFZZixLQUFLLDJCQUNsQ3FCLEVBQWlCTixFQUFZZixLQUFLLDJCQUNsQ3NCLEVBQWtCUCxFQUFZZixLQUFLLDZCQUVuQ3pCLEVBQVlELEVBQWVFLE1BQzNCK0MsRUFBV0wsRUFBYzFDLE1BQ3pCZ0QsRUFBY0wsRUFBZ0IzQyxNQUM5QmlELEVBQVlMLEVBQWU1QyxNQUMzQmtELEVBQVlMLEVBQWU3QyxNQUMzQm1ELEVBQWNMLEVBQWdCOUMsTUFFbENHLFFBQVEyQixLQUFLLENBQ1R6QixJQUFPLHFCQUNQQyxLQUFRLENBQ0pQLFVBQWFBLEVBQ2JnRCxTQUFZQSxFQUNaQyxZQUFlQSxFQUNmQyxVQUFhQSxFQUNiQyxVQUFhQSxFQUNiQyxZQUFlQSxHQUVuQjVDLFFBQVcsU0FBVUMsR0FDakJ1QixPQUFPQyxTQUFTQyxlQVFoQ3JFLEVBQUUsWUFDYSxJQUFJSixNQUNWUSxRQUdUSixFQUFFLFlBQ2lCLElBQUlMLFdBQ1ZTIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xyXG5cclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ydW49IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9dGhpcztcclxuICAgIHNlbGYubGlzdGVuQXVlaEJveEhvdmVyKCk7XHJcbn07XHJcbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuQXVlaEJveEhvdmVyPWZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgYXV0aGJveCA9ICQoJy5hdXRoLWJveCcpO1xyXG4gICAgdmFyIHVzZXJtb3JlYm94PSAkKCcudXNlci1tb3JlLWJveCcpO1xyXG4gICAgYXV0aGJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlcm1vcmVib3guc2hvdygpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHVzZXJtb3JlYm94LmhpZGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXI9JCgnLnNjcm9sbC13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNtc2NhcHRjaGE9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcclxufVxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9dGhpcztcclxuICAgIHNlbGYubGlzdGVuU2hvd0hpZGVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5zd2l0Y2hFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaWduaW5FdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYSgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaWdudXBFdmVudCgpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9dGhpcztcclxuICAgIHZhciBzaWduaW5CdG4gPSQoJy5zaWduaW4tYnRuJyk7XHJcbiAgICB2YXIgc2lnbnVwQnRuID0kKCcuc2lnbnVwLWJ0bicpO1xyXG4gICAgdmFyIGNsb3NlQnRuID0kKCcuY2xvc2UtYnRuJyk7XHJcbiAgICB2YXIgdXdzZXJWPSQoJy5mb3JtLWNvbnRyb2wnKTtcclxuXHJcbiAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOjB9KTtcclxuICAgIH0pO1xyXG4gICAgc2lnbnVwQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoeydsZWZ0JzotNDAwfSk7XHJcbiAgICB9KTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICB1d3NlclYucmVzZXQoKTtcclxuICAgICAgIC8vIHV3c2VyVi5zZXQobnVsbCk7XHJcbiAgICAgICAvLyAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXNzd29yZFwiKS5yZXNldCgpXHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbnN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmPXRoaXM7XHJcbiAgICB2YXIgc3dpdGNoZXI9JCgnLnN3aXRjaCcpO1xyXG4gICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgIGN1cnJlbnRMZWZ0PXBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZiAoY3VycmVudExlZnQ8MCl7XHJcbiAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6MH0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOlwiLTQwMHB4XCJ9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudD1mdW5jdGlvbigpe1xyXG4gICAgdmFyIGltZ2NhcHRjaGEgPSQoJy5pbWctY2FwdGNoYScpO1xyXG4gICAgaW1nY2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1nY2FwdGNoYS5hdHRyKFwic3JjXCIsXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIitcIj9yYW5kb209XCIrTWF0aC5yYW5kb20oKSlcclxuICAgICAgICAvLyBpbWdjYXB0Y2hhLmF0dHIoXCJzcmNcIixcIi9hY2NvdW50L2ltZ19jYXB0Y2hhL1wiK1wiP3JhbmRvbT1cIitNYXRoLnJhbmRvbSgpKVxyXG4gICAgfSlcclxufTtcclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TbXNDYXB0Y2hhPWZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9dGhpcztcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dD0kKFwiLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHNlbGYuc21zY2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICB2YXIgdGVsZXBob25lPXRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIGlmKCF0ZWxlcGhvbmUpe1xyXG4gICAgICAgICAgICBtZXNzYWdlQm94LnNob3dFcnJvcign6K+36L6T5YWl5omL5py65Y+356CB77yBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9hY2NvdW50L3Ntc19jYXB0Y2hhLycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzp0ZWxlcGhvbmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT0yMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc21zU3VjY2Vzc0V2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmYWlsJzpmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50PWZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZj10aGlzO1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2Vzcygn55+t5L+h6aqM6K+B56CB5Y+R6YCB5oiQ5Yqf77yBJyk7XHJcbiAgICBzZWxmLnNtc2NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB2YXIgY291bnQ9IDIwO1xyXG4gICAgc2VsZi5zbXNjYXB0Y2hhLnVuYmluZCgnY2xpY2snKTtcclxuICAgIHZhciB0aW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zbXNjYXB0Y2hhLnRleHQoY291bnQrJ3MnKTtcclxuICAgICAgICBjb3VudC09MTtcclxuICAgICAgICBpZihjb3VudDw9MCl7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc2NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIHNlbGYuc21zY2FwdGNoYS50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB9LDEwMDApO1xyXG5cclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50PSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gdmFyIGNsb3NlQnRuID0kKCcuY2xvc2UtYnRuJyk7XHJcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKCcuc2lnbmluLWdyb3VwJyk7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dD0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG4gICAgdmFyIHN1Ym1pdEJ0bj1zaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcblxyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lPXRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyPSByZW1lbWJlcklucHV0LnByb3AoXCJjaGVja2VkXCIpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonL2FjY291bnQvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZCc6cGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOnJlbWVtYmVyPzE6MFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdD1yZXN1bHRbJ21lc3NhZ2UnXTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgbWVzc2FnZU9iamVjdCA9PSAnc3RyaW5nJyB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09IFN0cmluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3cobWVzc2FnZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBtZXNzYWdlT2JqZWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcz1tZXNzYWdlT2JqZWN0W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZT0gbWVzc2FnZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ251cEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNpZ251cEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ251cEdyb3VwLmZpbmQoJy5zdWJtaXQtYnRuJyk7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcclxuICAgICAgICB2YXIgc21zQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XHJcblxyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOiBwYXNzd29yZDIsXHJcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKVxyXG59KTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICB2YXIgZnJvbnRiYXNlID0gbmV3IEZyb250QmFzZSgpO1xyXG4gICBmcm9udGJhc2UucnVuKCk7XHJcbn0pO1xyXG5cclxuIl19
